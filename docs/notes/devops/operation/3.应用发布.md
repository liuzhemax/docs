---
title: 应用发布
createTime: 2024/10/01 22:42:11
permalink: /notes/devops/bg46gdjh/
---
### 环境管理

配置应用环境，例如开发环境、测试环境、生产环境, 从而做到应用在不同环境的有不同的配置, 操作相互隔离。

### 项目管理

可以将多个应用归属于某个项目下进行管理。

### 应用管理

管理和维护应用, 每个应用在不同的环境都可以有不同的配置。

新增应用，填写应用中文及英文名称，选择需要关联的项目。

新增发布配置（预发布配置）
 - 选择需要发布的环境
 - 选择要部署的目标主机
 - 填写代码的==Git==仓库地址
 - ==Git==凭据可在凭据管理模块提前添加，如果是公开仓库可选择无
 - 消息通知可在通知管理模块提前添加，如果不需要通知可选择无
 - 源文件指要发布到指定机器的产物，默认是 ==*== 代表所有文件，例如前端构建出的产物是==dist==文件，
   后端构建的产物是==target/build.jar==文件，构建出的产物默认在机器上的位置是 ==/tmp/应用名/== 下面
 - 代码检出前执行脚本指代码拉取之前做的一些事情，如有可填写
 - 代码检出后执行脚本指代码拉取之后做的一些事情，例如执行构建命令操作
 - 服务器部署路径指构建产物要放在哪个路径下，例如/usr/share/nginx/html/
 - 历史版本路径指要备份到哪个路径，例如/data/backup/
 - 历史版本保留数指要保留几个版本
 - 部署前执行脚本指部署前需要执行的脚本，例如停止应用服务
 - 部署后执行脚本指部署后需要执行的脚本，例如启动应用服务

发布配置用于管理新增的应用发布配置，例如查看、编辑、删除。

### 发布申请

管理和维护应用的发布。

设计思路: 应用在发布之前需要先由宿主机进行构建, 生成一个可发布的产物, 发布时需要基于该产物进行发布操作。

新增发布申请：
 - 选择要发布的环境
 - 选择要发布的应用，选择后会自动带出要发布的目标主机（发布配置预先配置好的目标主机），也可重新选择目标主机
 - 申请标题用于标识，例如修复xxx的bug
 - 选择分支会从发布配置中预先填写的仓库地址下获取所有分支

发布：进行应用发布操作。

日志：查看发布日志。

回滚：发布之后若有问题，可做回滚操作。选择需要回滚的版本、目标主机，填写回滚后执行的脚本，例如重启服务。


